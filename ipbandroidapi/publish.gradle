apply plugin: 'maven'

repositories {
    maven { url "https://raw.github.com/synergian/wagon-git/releases" }
}

configurations {
    deployLibrary
}

dependencies {
    deployLibrary "ar.com.synergian:wagon-git:0.2.5"
}


uploadArchives {

    repositories.mavenDeployer {
        configuration = configurations.deployLibrary
        repository(url: 'git:lib://git@bitbucket.org:' + COMPANY + '/' + REPOSITORY_NAME + '.git')
        // TODO: не забудь поменять для тестов
        // lib - Антон, test_lib - Иля, dev_lib - Готовое

        pom.project {
            groupId = ARTIFACT_PACKAGE
            version = "${major}.${generateMinorVersionCode()}"
            artifactId = ARTIFACT_NAME
            packaging ARTIFACT_PACKAGING
        }
        println("${major}.${generateMinorVersionCode()}")
    }
}